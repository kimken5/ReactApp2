{
  "Logging": {
    "LogLevel": {
      "Default": "Warning",
      "Microsoft.AspNetCore": "Warning",
      "Microsoft.EntityFrameworkCore.Database.Command": "Warning",
      "ReactApp.Server": "Information",
      "System.Net.Http.HttpClient": "Warning"
    }
  },

  "ConnectionStrings": {
    "DefaultConnection": "Server=tcp:production-server.database.windows.net,1433;Initial Catalog=kindergarten_prod;Encrypt=True;TrustServerCertificate=False;Connection Timeout=60;User ID=${DB_USER};Password=${DB_PASSWORD};MultipleActiveResultSets=True;Max Pool Size=100;Min Pool Size=5;",
    "RedisConnection": "${REDIS_CONNECTION_STRING}"
  },

  "Jwt": {
    "SecretKey": "${JWT_SECRET_KEY}",
    "Issuer": "KindergartenApp",
    "Audience": "KindergartenApp",
    "AccessTokenExpirationMinutes": 720,
    "RefreshTokenExpirationDays": 30
  },

  "Media4U": {
    "BasicAuthUser": "${MEDIA4U_USERNAME}",
    "BasicAuthPassword": "${MEDIA4U_PASSWORD}",
    "ApiEndpoint": "https://www.sms-ope.com/sms/api/"
  },

  "Azure": {
    "ApplicationInsights": {
      "ConnectionString": "${APP_INSIGHTS_CONNECTION_STRING}"
    },
    "Storage": {
      "ConnectionString": "${AZURE_STORAGE_CONNECTION_STRING}",
      "PhotoContainerName": "nurseries-photo",
      "ThumbnailContainerName": "nurseries-photo",
      "CdnEndpoint": "${CDN_ENDPOINT}"
    },
    "NotificationHub": {
      "ConnectionString": "${NOTIFICATION_HUB_CONNECTION_STRING}",
      "HubName": "kindergarten-notifications"
    }
  },

  "RateLimit": {
    "AuthPolicy": {
      "PermitLimit": 5,
      "WindowMinutes": 1
    },
    "SmsPolicy": {
      "PermitLimit": 2,
      "WindowMinutes": 60
    },
    "VerifyPolicy": {
      "PermitLimit": 3,
      "WindowMinutes": 5
    },
    "ApiPolicy": {
      "PermitLimit": 100,
      "WindowMinutes": 1
    }
  },

  "Caching": {
    "Redis": {
      "InstanceName": "kindergarten-cache",
      "DefaultExpirationMinutes": 60,
      "Configuration": {
        "AbortOnConnectFail": false,
        "ConnectTimeout": 5000,
        "SyncTimeout": 5000,
        "ResponseTimeout": 5000,
        "ReconnectRetryPolicy": "Linear(TimeSpan.FromSeconds(5))"
      }
    },
    "Memory": {
      "SizeLimit": 200000000,
      "CompactionPercentage": 0.25,
      "ExpirationScanFrequency": "00:02:00"
    }
  },

  "Performance": {
    "ResponseCompression": {
      "EnableBrotli": true,
      "CompressionLevel": "Optimal",
      "MimeTypes": [
        "application/json",
        "text/json",
        "text/plain",
        "text/html",
        "text/css",
        "application/javascript",
        "text/javascript",
        "image/svg+xml",
        "application/xml",
        "text/xml"
      ]
    },
    "StaticFiles": {
      "MaxAge": 31536000,
      "EnableETag": true,
      "EnableContentEncoding": true
    },
    "Database": {
      "CommandTimeout": 30,
      "MaxRetryCount": 3,
      "MaxRetryDelay": "00:00:30",
      "EnableSensitiveDataLogging": false,
      "EnableDetailedErrors": false,
      "QueryTrackingBehavior": "TrackAll"
    }
  },

  "HealthChecks": {
    "Timeout": "00:00:30",
    "Period": "00:01:00",
    "FailureThreshold": 3,
    "Endpoints": {
      "Database": true,
      "Redis": true,
      "ExternalServices": true,
      "Storage": true
    }
  },

  "Monitoring": {
    "EnableApplicationInsights": true,
    "SamplingPercentage": 10.0,
    "EnableRequestTracking": true,
    "EnableDependencyTracking": true,
    "EnablePerformanceCounters": true,
    "EnableHeartbeat": true
  },

  "Security": {
    "RequireHttps": true,
    "HstsMaxAge": 31536000,
    "HstsIncludeSubdomains": true,
    "EnableSecurityHeaders": true,
    "TrustedProxies": ["10.0.0.0/8", "172.16.0.0/12", "192.168.0.0/16"],
    "AllowedHosts": ["kindergarten-app.azurewebsites.net", "kindergarten.example.com"]
  },

  "Development": {
    "DisableSms": false
  }
}