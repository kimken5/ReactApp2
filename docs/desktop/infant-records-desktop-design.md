# デスクトップアプリ: 乳児生活記録管理画面設計

作成日: 2026-01-24

## 1. 概要

デスクトップアプリから乳児生活記録（0〜2歳児の連絡帳データ）を閲覧・編集・削除できる管理画面の設計。

### 対象テーブル
1. **InfantMilks** - ミルク記録
2. **InfantMeals** - 食事記録
3. **InfantSleeps** - 午睡記録
4. **InfantSleepChecks** - 午睡チェック記録
5. **InfantToileting** - 排泄記録
6. **InfantTemperatures** - 体温記録
7. **InfantMoods** - 機嫌記録
8. **RoomEnvironmentRecords** - 室温・湿度記録

### 主な機能
- クラス・園児・日付による絞り込み
- 各記録の閲覧・編集・削除
- 監査用帳票出力（PDF/Excel）
- 午睡チェック表（横軸時間型）の表示・印刷

---

## 2. 画面構成

### 2.1 メインメニュー

**既存の「デイリーレポート」セクションに追加**:

```
📋 デイリーレポート
  ├─ デイリーレポート管理
  ├─ デイリーレポート作成
  └─ 🆕 乳児生活記録管理
```

---

## 3. 乳児生活記録管理画面

### 3.1 画面レイアウト

```
┌─────────────────────────────────────────────────────────────────┐
│  乳児生活記録管理                                    [ヘルプ]    │
├─────────────────────────────────────────────────────────────────┤
│  📅 検索条件                                                     │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │ クラス: [ひよこ組（0歳児）▼] 日付: [2026-01-24 ◀ ▶]      │  │
│  │ 園児: [全員▼] または [田中太郎 ▼]                         │  │
│  │                                    [検索] [クリア]         │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                   │
│  📊 タブメニュー                                                 │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │ [概要] [ミルク] [食事] [睡眠] [午睡チェック] [排泄]         │  │
│  │ [体温] [機嫌] [室温・湿度]                                   │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                   │
│  📋 記録一覧 (タブに応じて内容変更)                              │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │ (各タブの記録テーブル表示)                                   │  │
│  │                                                               │  │
│  │                                                               │  │
│  │                               [編集] [削除] [詳細表示]       │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                   │
│  📄 アクション                                                   │
│  [+ 新規作成] [📊 日次レポート出力] [📋 午睡チェック表]         │
│                                                                   │
└─────────────────────────────────────────────────────────────────┘
```

### 3.2 概要タブ（デフォルト表示）

**1日の記録サマリー表示** - 園児別のタイムライン形式

```
┌─────────────────────────────────────────────────────────────────┐
│  2026年1月24日（金） ひよこ組（0歳児クラス）                      │
├─────────────────────────────────────────────────────────────────┤
│  👶 田中太郎（0歳3ヶ月）                         [詳細を開く ▼]  │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │ 🌡️ 体温: 朝36.5℃ 午後36.8℃                                  │  │
│  │ 🍼 ミルク: 10:00(120mL) 14:00(100mL) 17:00(130mL)          │  │
│  │ 🍚 食事: 昼食11:30 完食                                      │  │
│  │ 😊 機嫌: 朝=良い 午後=普通                                   │  │
│  │ 💩 排泄: おしっこ5回 うんち1回(正常)                         │  │
│  │ 😴 午睡: 13:00〜15:00 (120分・ぐっすり)                      │  │
│  │    午睡チェック: 正常 (18回記録)                             │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                   │
│  👶 鈴木花子（0歳8ヶ月）                         [詳細を開く ▼]  │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │ 🌡️ 体温: 朝37.2℃ ⚠️微熱 午後36.9℃                          │  │
│  │ 🍚 食事: 午前おやつ=半分 昼食=ほぼ完食 午後おやつ=完食       │  │
│  │ ...                                                           │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                   │
│  📊 クラス全体の環境記録                                         │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │ 🌡️ 室温: 24.0℃  💧 湿度: 55%  ✓適正範囲                     │  │
│  │ 記録時刻: 13:00 (午睡開始時)                                 │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                   │
│  🚀 クイック操作                                                 │
│  [🌡️ クラス体温一覧入力] [📊 日次レポート] [📋 午睡チェック表]  │
└─────────────────────────────────────────────────────────────────┘
```

### 3.3 各記録タブの詳細設計

#### 3.3.1 ミルクタブ (InfantMilks)

```
┌───────────────────────────────────────────────────────────────┐
│  田中太郎 - 2026年1月24日 ミルク記録                            │
├───────────────────────────────────────────────────────────────┤
│  時刻    │ ミルク量 │ メモ                   │ 記録者 │ 操作  │
│──────────┼──────────┼────────────────────────┼────────┼───────│
│  10:00   │  120 mL  │ よく飲んだ             │ 山田   │ 編集  │
│  14:00   │  100 mL  │ 途中で眠った           │ 佐藤   │ 削除  │
│  17:00   │  130 mL  │                        │ 山田   │ 編集  │
│──────────┴──────────┴────────────────────────┴────────┴───────│
│  合計: 350 mL (3回)                         [+ 追加]          │
└───────────────────────────────────────────────────────────────┘
```

**編集モーダル**:
```
┌─────────────────────────────────────────┐
│  ミルク記録編集                         │
├─────────────────────────────────────────┤
│  園児: 田中太郎                         │
│  日付: 2026-01-24                       │
│                                         │
│  ミルク時刻: [10:00 ▼]                 │
│  ミルク量: [120] mL                     │
│  メモ: [よく飲んだ________________]    │
│                                         │
│              [保存] [キャンセル]        │
└─────────────────────────────────────────┘
```

#### 3.3.2 食事タブ (InfantMeals)

```
┌───────────────────────────────────────────────────────────────┐
│  田中太郎 - 2026年1月24日 食事記録                              │
├───────────────────────────────────────────────────────────────┤
│  時刻  │ 種別           │ 摂取量   │ メモ           │ 操作    │
│────────┼────────────────┼──────────┼────────────────┼─────────│
│  09:30 │ 午前おやつ     │ 完食     │ バナナ         │ 編集    │
│  11:30 │ 昼食（離乳食） │ ほぼ完食 │ おかゆ好き     │ 編集    │
│  15:00 │ 午後おやつ     │ 半分     │ 眠そうだった   │ 削除    │
│────────┴────────────────┴──────────┴────────────────┴─────────│
│                                              [+ 追加]          │
└───────────────────────────────────────────────────────────────┘
```

#### 3.3.3 睡眠タブ (InfantSleeps)

```
┌───────────────────────────────────────────────────────────────┐
│  田中太郎 - 2026年1月24日 午睡記録                              │
├───────────────────────────────────────────────────────────────┤
│  午睡  │ 開始    │ 終了    │ 時間   │ 質       │ メモ  │ 操作│
│────────┼─────────┼─────────┼────────┼──────────┼───────┼─────│
│  1回目 │ 13:00   │ 15:00   │ 120分  │ ぐっすり │       │ 編集│
│────────┴─────────┴─────────┴────────┴──────────┴───────┴─────│
│                                              [+ 追加]          │
│                                                                 │
│  🔍 この午睡の詳細チェック記録を見る → [午睡チェック表示示]   │
└───────────────────────────────────────────────────────────────┘
```

#### 3.3.4 午睡チェックタブ (InfantSleepChecks) ⭐重要

**監査対応の横軸時間型表示**

```
┌─────────────────────────────────────────────────────────────────────────┐
│  午睡チェック表 - ひよこ組（0歳児） 2026年1月24日（金）                   │
├─────────────────────────────────────────────────────────────────────────┤
│  🌡️ 室温: 24.0℃  💧 湿度: 55%  記録時刻: 13:00  ✓適正範囲              │
├─────────────────────────────────────────────────────────────────────────┤
│         │入眠│13:00│13:05│13:10│13:15│13:20│13:25│13:30│...│14:55│15:00│起床│
│  園児名 │時刻│     │     │     │     │     │     │     │   │     │     │時刻│
├─────────┼────┼─────┼─────┼─────┼─────┼─────┼─────┼─────┼───┼─────┼─────┼────┤
│田中太郎 │13:00│  ✓  │  ✓  │  ✓  │  ✓  │  ✓  │  ✓  │  ✓  │...│  ✓  │  ✓  │15:00│
│ 0歳3ヶ月│仰向│ 仰  │ 仰  │ 右  │ 仰  │ 仰  │ 仰  │ 仰  │...│ 仰  │ 仰  │    │
│         │    │ 山  │ 山  │ 佐  │ 山  │ 山  │ 佐  │ 山  │...│ 山  │ 山  │    │
├─────────┼────┼─────┼─────┼─────┼─────┼─────┼─────┼─────┼───┼─────┼─────┼────┤
│鈴木花子 │13:05│     │  ✓  │  ✓  │  ✓  │  ⚠  │  ✓  │  ✓  │...│  ✓  │  ✓  │15:10│
│ 0歳8ヶ月│仰向│     │ 仰  │ 仰  │ 左  │うつ │ 右  │ 仰  │...│ 仰  │ 仰  │    │
│         │    │     │ 山  │ 佐  │ 山  │伏山│ 佐  │ 山  │...│ 佐  │ 佐  │    │
└─────────┴────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┴───┴─────┴─────┴────┘

凡例: ✓=正常  ⚠=警告  🚨=重大アラート
体位: 仰=仰向け  右=右向き  左=左向き  うつ伏=うつ伏せ
記録者: 山=山田  佐=佐藤

                                    [📋 PDF出力] [📊 Excel出力] [🖨️ 印刷]
```

**詳細チェック情報（各セルクリックで表示）**:
```
┌───────────────────────────────────────┐
│  13:20 鈴木花子 チェック詳細          │
├───────────────────────────────────────┤
│  呼吸状態: 正常                       │
│  頭の向き: 左                         │
│  体温チェック: 正常                   │
│  顔色: 正常                           │
│  体勢: うつ伏せ ⚠️警告                │
│  記録者: 山田                         │
│                                       │
│  ⚠️ うつ伏せ状態を検出しました        │
│     対応: すぐに仰向けに戻しました    │
│                                       │
│              [閉じる]                 │
└───────────────────────────────────────┘
```

#### 3.3.5 排泄タブ (InfantToileting)

```
┌───────────────────────────────────────────────────────────────┐
│  田中太郎 - 2026年1月24日 排泄記録                              │
├───────────────────────────────────────────────────────────────┤
│  時刻  │おしっこ│うんち│ 量   │ 状態   │ 記録者 │ 操作      │
│────────┼────────┼──────┼──────┼────────┼────────┼───────────│
│  09:00 │   ✓    │      │ 普通 │        │ 山田   │ 編集      │
│  11:00 │   ✓    │  ✓   │ 普通 │ 正常   │ 佐藤   │ 削除      │
│  13:00 │   ✓    │      │ 多量 │        │ 山田   │ 編集      │
│  15:00 │   ✓    │      │ 少量 │        │ 佐藤   │ 編集      │
│  17:00 │   ✓    │      │ 普通 │        │ 山田   │ 削除      │
│────────┴────────┴──────┴──────┴────────┴────────┴───────────│
│  集計: おしっこ 5回  うんち 1回              [+ 追加]          │
└───────────────────────────────────────────────────────────────┘
```

#### 3.3.6 体温タブ (InfantTemperatures)

**個別園児モード** - 園児1名ずつの体温記録を表示・編集

```
┌───────────────────────────────────────────────────────────────┐
│  田中太郎 - 2026年1月24日 体温記録                              │
├───────────────────────────────────────────────────────────────┤
│  測定    │ 時刻  │ 体温  │ 測定箇所 │ 入力者   │ メモ  │ 操作│
│──────────┼───────┼───────┼──────────┼──────────┼───────┼─────│
│  朝      │ 08:30 │ 36.5℃│ 脇下     │ 保護者   │       │ 編集│
│  午後    │ 14:00 │ 36.8℃│ 脇下     │ スタッフ │       │ 編集│
│──────────┴───────┴───────┴──────────┴──────────┴───────┴─────│
│  ℹ️ 37.5℃以上で異常フラグが自動設定されます                    │
│                                                                 │
│  [📋 クラス一覧入力モードに切替]                               │
└───────────────────────────────────────────────────────────────┘
```

### 3.4 クラス一覧体温入力画面 ⭐効率化

**目的**: クラス全員の体温を一括で入力できる効率的な画面

**アクセス方法**:
- 体温タブの「クラス一覧入力モードに切替」ボタン
- または概要タブの「クイック体温入力」ボタン

```
┌─────────────────────────────────────────────────────────────────┐
│  クラス体温一覧入力 - ひよこ組（0歳児） 2026年1月24日          │
├─────────────────────────────────────────────────────────────────┤
│  📋 一括入力モード              [個別入力モードに切替]          │
├─────────────────────────────────────────────────────────────────┤
│  園児名      │ 朝(08:30)  │ 測定箇所 │ 午後(14:00) │ 測定箇所 │
│  (年齢)      │            │          │             │          │
│──────────────┼────────────┼──────────┼─────────────┼──────────│
│ 田中太郎     │ [36.5]℃   │ 脇下▼   │ [36.8]℃    │ 脇下▼   │
│ (0歳3ヶ月)   │ ✓保護者入力│          │             │          │
│──────────────┼────────────┼──────────┼─────────────┼──────────│
│ 鈴木花子     │ [37.2]℃⚠️ │ 脇下▼   │ [36.9]℃    │ 脇下▼   │
│ (0歳8ヶ月)   │            │          │             │          │
│──────────────┼────────────┼──────────┼─────────────┼──────────│
│ 佐藤一郎     │ [36.6]℃   │ 耳▼     │ [36.7]℃    │ 耳▼     │
│ (1歳2ヶ月)   │            │          │             │          │
│──────────────┼────────────┼──────────┼─────────────┼──────────│
│ 山田次郎     │ [   ]℃    │ 脇下▼   │ [   ]℃     │ 脇下▼   │
│ (1歳5ヶ月)   │ 未入力     │          │ 未入力      │          │
│──────────────┼────────────┼──────────┼─────────────┼──────────│
│ 高橋三郎     │ [36.4]℃   │ 額▼     │ [   ]℃     │ 額▼     │
│ (1歳8ヶ月)   │            │ 未入力  │             │          │
│──────────────┴────────────┴──────────┴─────────────┴──────────│
│  ⚠️ 異常値(37.5℃以上): 1名（鈴木花子 - 朝37.2℃）              │
│  ✓ 入力済み: 4/5名（朝）、3/5名（午後）                        │
│  📊 平均体温: 朝36.7℃、午後36.8℃                               │
│                                                                 │
│  [💾 一括保存] [クリア] [前日データコピー] [Excelインポート]   │
└─────────────────────────────────────────────────────────────────┘
```

**機能詳細**:

1. **キーボードナビゲーション**
   - Tabキーで次の入力欄へ移動
   - Enterキーで次の園児の同じ列へ移動
   - 数値入力のみ受け付け（小数点1桁まで）

2. **自動異常検出**
   - 37.5℃以上: 赤背景 + ⚠️警告マーク
   - 35.0℃未満: 青背景 + ⚠️警告マーク
   - 範囲外: 35.0〜42.0℃

3. **保護者入力済みマーク**
   - 朝の体温が既に保護者により入力されている場合は「✓保護者入力」表示
   - スタッフは上書き可能（履歴は保存）

4. **前日データコピー**
   - 測定箇所のデフォルト値として前日の設定をコピー
   - 体温値はコピーしない（毎日測定必須）

5. **Excelインポート**
   - Excel形式（園児名、朝体温、午後体温）でアップロード
   - バリデーション後に一括反映

6. **一括保存**
   - 入力済みの全園児データを一度に保存
   - 未入力の園児はスキップ
   - 保存後に入力済み件数を表示

**バリデーション**:
```
入力チェック:
- 体温範囲: 35.0〜42.0℃
- 小数点: 第1位まで（36.5℃ OK、36.55℃ NG）
- 測定箇所: 必須（脇下/耳/額から選択）
- 異常値の場合: 確認ダイアログ表示
  「鈴木花子の朝の体温が37.2℃です。保存してよろしいですか？」
```

#### 3.3.7 機嫌タブ (InfantMoods)

```
┌───────────────────────────────────────────────────────────────┐
│  田中太郎 - 2026年1月24日 機嫌記録                              │
├───────────────────────────────────────────────────────────────┤
│  時刻  │ 機嫌状態 │ メモ                   │ 記録者 │ 操作  │
│────────┼──────────┼────────────────────────┼────────┼───────│
│  08:30 │ 良い     │ 元気に登園             │ 山田   │ 編集  │
│  14:00 │ 普通     │ 午睡後少し眠そう       │ 佐藤   │ 編集  │
│  17:00 │ 不機嫌   │ お迎え待ちで泣く       │ 山田   │ 削除  │
│────────┴──────────┴────────────────────────┴────────┴───────│
│                                              [+ 追加]          │
└───────────────────────────────────────────────────────────────┘
```

#### 3.3.8 室温・湿度タブ (RoomEnvironmentRecords)

```
┌───────────────────────────────────────────────────────────────┐
│  ひよこ組 - 2026年1月24日 室温・湿度記録                        │
├───────────────────────────────────────────────────────────────┤
│  記録日時: 2026-01-24 13:00                                    │
│  室温: 24.0℃  [10.0 〜 35.0]                                   │
│  湿度: 55.0%  [0.0 〜 100.0]                                   │
│  備考: [午睡開始時に計測_____________________________]        │
│  記録者: 山田                                                  │
│                                                                 │
│  ✓ 適正範囲: 室温 22-26℃、湿度 50-60%                          │
│                                                                 │
│                                    [保存] [キャンセル]         │
└───────────────────────────────────────────────────────────────┘

📊 過去7日間の推移グラフ
┌───────────────────────────────────────────────────────────────┐
│  室温（℃）                                                     │
│  26 ┤                                                           │
│  24 ┤ ●─●─●─●─●─●─●                                         │
│  22 ┤                                                           │
│     └───────────────────────────────                            │
│      18  19  20  21  22  23  24 (日)                           │
│                                                                 │
│  湿度（%）                                                      │
│  60 ┤ ●─●─●                                                   │
│  55 ┤       ●─●─●─●                                           │
│  50 ┤                                                           │
│     └───────────────────────────────                            │
│      18  19  20  21  22  23  24 (日)                           │
└───────────────────────────────────────────────────────────────┘
```

---

## 4. 監査用帳票出力機能

### 4.1 日次レポート（全記録統合）

**出力形式**: PDF / Excel

**内容**:
```
┌─────────────────────────────────────────────────────────────────┐
│                 乳児生活記録（連絡帳）                            │
│                 ひよこ組（0歳児クラス）                           │
│                 2026年1月24日（金）                               │
├─────────────────────────────────────────────────────────────────┤
│  【環境記録】                                                    │
│  室温: 24.0℃  湿度: 55%  記録時刻: 13:00  ✓適正範囲             │
├─────────────────────────────────────────────────────────────────┤
│  【園児: 田中太郎（0歳3ヶ月）】                                  │
│                                                                  │
│  ■体温                                                           │
│  朝 08:30  36.5℃ (脇下) [保護者入力]                            │
│  午後 14:00  36.8℃ (脇下) [スタッフ入力]                        │
│                                                                  │
│  ■ミルク                                                         │
│  10:00  120mL  よく飲んだ                                        │
│  14:00  100mL  途中で眠った                                      │
│  17:00  130mL                                                    │
│  【合計: 350mL (3回)】                                           │
│                                                                  │
│  ■食事                                                           │
│  09:30  午前おやつ  完食  バナナ                                 │
│  11:30  昼食（離乳食）  ほぼ完食  おかゆ好き                     │
│  15:00  午後おやつ  半分  眠そうだった                           │
│                                                                  │
│  ■午睡                                                           │
│  1回目: 13:00〜15:00 (120分・ぐっすり)                           │
│  午睡チェック: 正常 (24回記録・5分間隔)                          │
│                                                                  │
│  ■排泄                                                           │
│  おしっこ: 5回  うんち: 1回 (正常・普通量)                       │
│                                                                  │
│  ■機嫌                                                           │
│  08:30  良い  元気に登園                                         │
│  14:00  普通  午睡後少し眠そう                                   │
│                                                                  │
├─────────────────────────────────────────────────────────────────┤
│  【園児: 鈴木花子（0歳8ヶ月）】                                  │
│  ...                                                             │
└─────────────────────────────────────────────────────────────────┘
```

### 4.2 午睡チェック表（監査対応版）

**出力形式**: PDF / Excel（横軸時間型）

前述の「3.3.4 午睡チェックタブ」の表形式をそのまま帳票化。

**特徴**:
- A3横向き推奨
- 5分間隔のグリッド表示
- 異常値のハイライト（赤色）
- 記録者の署名欄
- 室温・湿度の記載

---

## 5. API設計

### 5.1 エンドポイント一覧

#### 乳児生活記録取得
```http
GET /api/desktop/infant-records/{childId}/{date}
```
**レスポンス**: 指定園児・日付の全記録（7種類）を統合して返す

#### 個別記録CRUD

**ミルク記録**
```http
GET    /api/desktop/infant-milks?childId={childId}&date={date}
POST   /api/desktop/infant-milks
PUT    /api/desktop/infant-milks/{nurseryId}/{childId}/{recordDate}/{milkTime}
DELETE /api/desktop/infant-milks/{nurseryId}/{childId}/{recordDate}/{milkTime}
```

**食事記録**
```http
GET    /api/desktop/infant-meals?childId={childId}&date={date}
POST   /api/desktop/infant-meals
PUT    /api/desktop/infant-meals/{nurseryId}/{childId}/{recordDate}/{mealTime}
DELETE /api/desktop/infant-meals/{nurseryId}/{childId}/{recordDate}/{mealTime}
```

**午睡記録**
```http
GET    /api/desktop/infant-sleeps?childId={childId}&date={date}
POST   /api/desktop/infant-sleeps
PUT    /api/desktop/infant-sleeps/{nurseryId}/{childId}/{recordDate}/{sleepSequence}
DELETE /api/desktop/infant-sleeps/{nurseryId}/{childId}/{recordDate}/{sleepSequence}
```

**午睡チェック記録**
```http
GET    /api/desktop/infant-sleep-checks?childId={childId}&date={date}&sleepSequence={seq}
POST   /api/desktop/infant-sleep-checks
PUT    /api/desktop/infant-sleep-checks/{id}
DELETE /api/desktop/infant-sleep-checks/{id}
```

**排泄記録**
```http
GET    /api/desktop/infant-toileting?childId={childId}&date={date}
POST   /api/desktop/infant-toileting
PUT    /api/desktop/infant-toileting/{nurseryId}/{childId}/{recordDate}/{toiletingTime}
DELETE /api/desktop/infant-toileting/{nurseryId}/{childId}/{recordDate}/{toiletingTime}
```

**体温記録**
```http
GET    /api/desktop/infant-temperatures?childId={childId}&date={date}
POST   /api/desktop/infant-temperatures
PUT    /api/desktop/infant-temperatures/{nurseryId}/{childId}/{recordDate}/{measurementType}
DELETE /api/desktop/infant-temperatures/{nurseryId}/{childId}/{recordDate}/{measurementType}
```

**体温記録（クラス一覧）**
```http
GET    /api/desktop/infant-temperatures/class-bulk?classId={classId}&date={date}
POST   /api/desktop/infant-temperatures/class-bulk
```

**リクエストボディ例（一括保存）**:
```json
{
  "nurseryId": 1,
  "classId": 5,
  "recordDate": "2026-01-24",
  "temperatures": [
    {
      "childId": 101,
      "morning": {
        "temperature": 36.5,
        "measurementLocation": "Armpit",
        "measuredAt": "2026-01-24T08:30:00"
      },
      "afternoon": {
        "temperature": 36.8,
        "measurementLocation": "Armpit",
        "measuredAt": "2026-01-24T14:00:00"
      }
    },
    {
      "childId": 102,
      "morning": {
        "temperature": 37.2,
        "measurementLocation": "Armpit",
        "measuredAt": "2026-01-24T08:30:00"
      },
      "afternoon": {
        "temperature": 36.9,
        "measurementLocation": "Armpit",
        "measuredAt": "2026-01-24T14:00:00"
      }
    }
  ]
}
```

**レスポンス例**:
```json
{
  "success": true,
  "savedCount": 4,
  "skippedCount": 0,
  "warnings": [
    {
      "childId": 102,
      "childName": "鈴木花子",
      "measurementType": "Morning",
      "temperature": 37.2,
      "message": "異常値（37.5℃未満ですが注意）"
    }
  ]
}
```

**機嫌記録**
```http
GET    /api/desktop/infant-moods?childId={childId}&date={date}
POST   /api/desktop/infant-moods
PUT    /api/desktop/infant-moods/{nurseryId}/{childId}/{recordDate}/{recordTime}
DELETE /api/desktop/infant-moods/{nurseryId}/{childId}/{recordDate}/{recordTime}
```

**室温・湿度記録**
```http
GET    /api/desktop/room-environment?classId={classId}&date={date}
POST   /api/desktop/room-environment
PUT    /api/desktop/room-environment/{nurseryId}/{classId}/{recordDate}
DELETE /api/desktop/room-environment/{nurseryId}/{classId}/{recordDate}
```

#### 帳票出力
```http
GET /api/desktop/infant-reports/daily-pdf?classId={classId}&date={date}
GET /api/desktop/infant-reports/daily-excel?classId={classId}&date={date}
GET /api/desktop/infant-reports/sleep-check-pdf?classId={classId}&date={date}
GET /api/desktop/infant-reports/sleep-check-excel?classId={classId}&date={date}
```

---

## 6. 権限とビジネスルール

### 6.1 アクセス権限
- **閲覧**: 全スタッフ（Desktop認証済み）
- **編集**: 記録作成者本人またはクラス担任
- **削除**: 記録作成者本人またはクラス担任（当日のみ）

### 6.2 削除制約
- **当日以外の記録は削除不可**（監査証跡保護）
- 削除時に確認ダイアログ表示
- 削除ログをAuditLogテーブルに記録

### 6.3 バリデーション
- **体温**: 35.0〜42.0℃
- **ミルク量**: 10〜300mL
- **室温**: 10.0〜35.0℃
- **湿度**: 0.0〜100.0%
- **午睡チェック**: 呼吸状態=Abnormal または 体勢=FaceDownの場合、警告表示

---

## 7. 技術実装メモ

### 7.1 フロントエンド
- React + TypeScript
- 状態管理: Context API
- UIコンポーネント: 既存のDesktopコンポーネントパターンを踏襲
- テーブル: react-table または独自実装
- グラフ: Recharts（室温・湿度推移）

### 7.2 バックエンド
- ASP.NET Core 8 Web API
- Entity Framework Core（Navigationプロパティなし、手動Join）
- 帳票生成: iTextSharp (PDF) / EPPlus (Excel)

### 7.3 パフォーマンス最適化
- クラス・日付による絞り込みでINDEXを活用
- 午睡チェック表は100件程度のレコードになるため、クライアント側でページング不要
- PDF/Excel生成は非同期処理（長時間かかる場合はジョブキュー化）

---

## 8. 今後の拡張案

### 8.1 複数日・複数園児対応
- 週次レポート（月〜金の5日間）
- クラス全員の月次サマリー

### 8.2 アラート機能
- 体温37.5℃以上で自動通知
- 午睡チェック未実施時間が10分超過で警告
- 室温・湿度が適正範囲外で警告

### 8.3 統計分析
- 園児別の成長曲線（ミルク摂取量推移）
- クラス全体の午睡パターン分析

---

## 9. 参考資料

- [infant-records-requirements-v2.md](../mobile/infant/infant-records-requirements-v2.md)
- [infant-records-create-tables.sql](../mobile/infant/infant-records-create-tables.sql)
- [infant-records-ui-flow-v2.md](../mobile/infant/infant-records-ui-flow-v2.md)
- [database-design.md](../mobile/database-design.md)
