# ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒª ä¹³å…ç”Ÿæ´»è¨˜éŒ²æ©Ÿèƒ½ UIè¨­è¨ˆæ›¸

## 1. æ¦‚è¦

### 1.1 ç›®çš„
ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã®ä¹³å…ç”Ÿæ´»è¨˜éŒ²æ©Ÿèƒ½ã«ãŠã‘ã‚‹ç”»é¢è¨­è¨ˆã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆã€ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ä»•æ§˜ã‚’å®šç¾©ã™ã‚‹ã€‚

### 1.2 å¯¾è±¡ç”»é¢
- é€±æ¬¡ãƒãƒˆãƒªãƒƒã‚¯ã‚¹ãƒ“ãƒ¥ãƒ¼ (`/desktop/infant-records/weekly`)
- ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«

---

## 2. é€±æ¬¡ãƒãƒˆãƒªãƒƒã‚¯ã‚¹ãƒ“ãƒ¥ãƒ¼

### 2.1 ç”»é¢ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¹³å…ç”Ÿæ´»è¨˜éŒ² (0ï½2æ­³å…)                                       â”‚
â”‚                                                                â”‚
â”‚  [< å‰é€±]  2026å¹´1æœˆ4æ—¥ï½1æœˆ10æ—¥  [æ¬¡é€± >]                    â”‚
â”‚                                                                â”‚
â”‚  ã‚¯ãƒ©ã‚¹: ã¤ãã—çµ„ (0æ­³å…) [â–¼]                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ é …ç›® â”‚ 1/4(æ—¥) â”‚ 1/5(æœˆ) â”‚ 1/6(ç«) â”‚ ... â”‚ 1/10(åœŸ) â”‚ â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚ â”‚ã€èŠ±å­ã€‘â”‚         â”‚         â”‚         â”‚     â”‚          â”‚ â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚ â”‚ã€ˆå®¶åº­ã€‰â”‚         â”‚         â”‚         â”‚     â”‚          â”‚ â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚ â”‚ä½“æ¸©  â”‚36.5(8:30)â”‚36.6(8:15)â”‚        â”‚     â”‚          â”‚ â”‚ â”‚
â”‚ â”‚      â”‚  ğŸ”’     â”‚  ğŸ”’     â”‚         â”‚     â”‚          â”‚ â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚ â”‚æ§˜å­  â”‚å…ƒæ°—ã§ã™ â”‚ã‚ˆãå¯ãŸ â”‚         â”‚     â”‚          â”‚ â”‚ â”‚
â”‚ â”‚      â”‚  ğŸ”’     â”‚  ğŸ”’     â”‚         â”‚     â”‚          â”‚ â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚ â”‚ã€ˆåˆå‰ã€‰â”‚         â”‚         â”‚         â”‚     â”‚          â”‚ â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚ â”‚ä½“æ¸©  â”‚36.8(10:00)â”‚37.0(9:45)â”‚       â”‚     â”‚          â”‚ â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚ â”‚...   â”‚...      â”‚...      â”‚...      â”‚     â”‚...       â”‚ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ãƒ˜ãƒƒãƒ€ãƒ¼éƒ¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

#### 2.2.1 é€±é¸æŠã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«

```tsx
interface WeekSelectorProps {
  weekStartDate: Date;
  onWeekChange: (newStartDate: Date) => void;
}

<div className="week-selector">
  <button
    className="week-nav-button"
    onClick={() => onWeekChange(addDays(weekStartDate, -7))}
  >
    <ChevronLeft /> å‰é€±
  </button>

  <span className="week-range">
    {formatWeekRange(weekStartDate)}
  </span>

  <button
    className="week-nav-button"
    onClick={() => onWeekChange(addDays(weekStartDate, 7))}
  >
    æ¬¡é€± <ChevronRight />
  </button>
</div>
```

**ã‚¹ã‚¿ã‚¤ãƒ«**:
```css
.week-selector {
  display: flex;
  align-items: center;
  gap: 16px;
  margin-bottom: 20px;
}

.week-nav-button {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 20px;
  background-color: #3B82F6;
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: background-color 0.2s;
}

.week-nav-button:hover {
  background-color: #2563EB;
}

.week-range {
  font-size: 18px;
  font-weight: 700;
  color: #1F2937;
  min-width: 240px;
  text-align: center;
}
```

#### 2.2.2 ã‚¯ãƒ©ã‚¹é¸æŠãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³

```tsx
interface ClassSelectorProps {
  classes: ClassInfo[];
  selectedClassId: number;
  onClassChange: (classId: number) => void;
}

<div className="class-selector">
  <label htmlFor="class-select">ã‚¯ãƒ©ã‚¹:</label>
  <select
    id="class-select"
    value={selectedClassId}
    onChange={(e) => onClassChange(Number(e.target.value))}
  >
    {classes.map(cls => (
      <option key={cls.classId} value={cls.classId}>
        {cls.className} ({cls.ageGroup})
      </option>
    ))}
  </select>
</div>
```

**ã‚¹ã‚¿ã‚¤ãƒ«**:
```css
.class-selector {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 20px;
}

.class-selector label {
  font-size: 14px;
  font-weight: 600;
  color: #374151;
}

.class-selector select {
  padding: 8px 32px 8px 12px;
  font-size: 14px;
  border: 1px solid #D1D5DB;
  border-radius: 6px;
  background-color: white;
  cursor: pointer;
}

.class-selector select:focus {
  outline: none;
  border-color: #3B82F6;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}
```

### 2.3 ãƒ†ãƒ¼ãƒ–ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

#### 2.3.1 ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ 

```tsx
interface WeeklyMatrixTableProps {
  weekStartDate: Date;
  children: ChildWeeklyRecord[];
  onCellClick: (childId: number, date: string, recordType: string) => void;
}

<table className="infant-weekly-matrix">
  <thead>
    <tr>
      <th className="col-item">é …ç›®</th>
      {dateRange.map(date => (
        <th key={date} className="col-date">
          {formatDateHeader(date)}
        </th>
      ))}
    </tr>
  </thead>
  <tbody>
    {children.map(child => (
      <ChildRecordRows
        key={child.childId}
        child={child}
        dateRange={dateRange}
        onCellClick={onCellClick}
      />
    ))}
  </tbody>
</table>
```

#### 2.3.2 åœ’å…è¨˜éŒ²è¡Œã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```tsx
const ChildRecordRows: React.FC<ChildRecordRowsProps> = ({
  child,
  dateRange,
  onCellClick
}) => {
  return (
    <>
      {/* å¤§é …ç›®: åœ’å…å */}
      <tr className="row-child-name">
        <td className="child-name-header">ã€{child.firstName}ã€‘</td>
        {dateRange.map(date => (
          <td key={date} className="empty-cell"></td>
        ))}
      </tr>

      {/* ä¸­é …ç›®: å®¶åº­ */}
      <tr className="row-category">
        <td className="category-header parent-category">ã€ˆå®¶åº­ã€‰</td>
        {dateRange.map(date => (
          <td key={date} className="empty-cell"></td>
        ))}
      </tr>

      {/* å°é …ç›®: ä½“æ¸© (å®¶åº­) */}
      <tr className="row-data">
        <td className="item-label">ä½“æ¸©</td>
        {dateRange.map(date => (
          <td
            key={date}
            className="data-cell parent-input readonly"
          >
            {formatTemperature(child.dailyRecords[date]?.home?.temperature)}
          </td>
        ))}
      </tr>

      {/* å°é …ç›®: æ§˜å­ (å®¶åº­) */}
      <tr className="row-data">
        <td className="item-label">æ§˜å­</td>
        {dateRange.map(date => (
          <td
            key={date}
            className="data-cell parent-input readonly"
          >
            {child.dailyRecords[date]?.home?.parentNote?.text}
          </td>
        ))}
      </tr>

      {/* ä»¥ä¸‹ã€åˆå‰ãƒ»åˆå¾Œãƒ»æ’æ³„ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚‚åŒæ§˜... */}
    </>
  );
};
```

#### 2.3.3 ã‚»ãƒ«ã®ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°

```css
/* ãƒ†ãƒ¼ãƒ–ãƒ«å…¨ä½“ */
.infant-weekly-matrix {
  width: 100%;
  border-collapse: collapse;
  font-size: 13px;
}

/* ãƒ˜ãƒƒãƒ€ãƒ¼ */
.infant-weekly-matrix thead th {
  background-color: #3B82F6;
  color: white;
  padding: 12px 8px;
  font-weight: 600;
  text-align: center;
  border: 1px solid #2563EB;
  position: sticky;
  top: 0;
  z-index: 10;
}

.col-item {
  width: 120px;
  min-width: 120px;
  position: sticky;
  left: 0;
  z-index: 11;
  background-color: #3B82F6;
}

.col-date {
  width: 140px;
  min-width: 140px;
}

/* å¤§é …ç›®: åœ’å…å */
.row-child-name {
  background-color: #1F2937;
}

.child-name-header {
  background-color: #1F2937;
  color: white;
  font-weight: 700;
  font-size: 15px;
  padding: 10px;
  text-align: center;
  border: 1px solid #111827;
  position: sticky;
  left: 0;
  z-index: 5;
}

/* ä¸­é …ç›®: ã‚«ãƒ†ã‚´ãƒª */
.category-header {
  font-weight: 600;
  font-size: 14px;
  padding: 8px 10px;
  text-align: center;
  border: 1px solid #D1D5DB;
  position: sticky;
  left: 0;
  z-index: 5;
}

.category-header.parent-category {
  background-color: #FEF3C7; /* è–„ã„é»„è‰² */
  color: #92400E;
}

.category-header.staff-category {
  background-color: #DBEAFE; /* è–„ã„é’ */
  color: #1E40AF;
}

/* å°é …ç›®ãƒ©ãƒ™ãƒ« */
.item-label {
  background-color: #F9FAFB;
  padding: 8px 10px;
  font-weight: 500;
  font-size: 13px;
  border: 1px solid #E5E7EB;
  text-align: left;
  position: sticky;
  left: 0;
  z-index: 5;
}

/* ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ« */
.data-cell {
  padding: 8px;
  border: 1px solid #E5E7EB;
  vertical-align: top;
  min-height: 40px;
  font-size: 12px;
  line-height: 1.5;
}

.empty-cell {
  background-color: #F9FAFB;
  border: 1px solid #E5E7EB;
}

/* ä¿è­·è€…å…¥åŠ› (èª­å–å°‚ç”¨) */
.data-cell.parent-input.readonly {
  background-color: #FFFBEB;
  color: #92400E;
  cursor: not-allowed;
}

.data-cell.parent-input.readonly:not(:empty)::before {
  content: 'ğŸ”’ ';
  font-size: 10px;
}

/* ã‚¹ã‚¿ãƒƒãƒ•å…¥åŠ› (ç·¨é›†å¯èƒ½) */
.data-cell.staff-input.editable {
  background-color: #FFFFFF;
  cursor: pointer;
  transition: all 0.2s;
}

.data-cell.staff-input.editable:hover {
  background-color: #EFF6FF;
  box-shadow: inset 0 0 0 2px #3B82F6;
}

.data-cell.staff-input.editable:empty::after {
  content: 'æœªå…¥åŠ›';
  color: #9CA3AF;
  font-style: italic;
  font-size: 11px;
}
```

### 2.4 ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

#### 2.4.1 ä½“æ¸©è¡¨ç¤º

```typescript
function formatTemperature(temp?: TemperatureRecord): string {
  if (!temp) return '';
  return `${temp.value}â„ƒ (${temp.time})`;
}

// ä¾‹: "36.5â„ƒ (8:30)"
```

#### 2.4.2 æ˜¼å¯è¡¨ç¤º

```typescript
function formatSleep(sleep?: SleepRecord): string {
  if (!sleep) return '';
  const lines = [
    `${sleep.start}-${sleep.end}`,
    `(${sleep.duration}åˆ†)`
  ];
  return lines.join('\n');
}

// ä¾‹: "12:30-14:00\n(90åˆ†)"
```

#### 2.4.3 æ’æ³„è¡¨ç¤º

```typescript
function formatUrineAmount(amount?: string): string {
  const map: Record<string, string> = {
    'Little': 'å°‘é‡',
    'Normal': 'æ™®é€š',
    'Lot': 'å¤šé‡'
  };
  return amount ? (map[amount] || amount) : '';
}

function formatBowelCondition(condition?: string, color?: string): string {
  if (!condition) return '';

  const conditionMap: Record<string, string> = {
    'Normal': 'æ™®é€š',
    'Hard': 'ç¡¬ã‚',
    'Soft': 'è»Ÿä¾¿',
    'Diarrhea': 'ä¸‹ç—¢'
  };

  const colorMap: Record<string, string> = {
    'Normal': 'æ™®é€š',
    'Green': 'ç·‘è‰²',
    'White': 'ç™½è‰²',
    'Black': 'é»’è‰²',
    'Bloody': 'è¡€ä¾¿'
  };

  // çŠ¶æ…‹/è‰² ã®å½¢å¼ã§è¡¨ç¤º (ä¾‹: è»Ÿä¾¿/æ™®é€šã€æ™®é€š/é»’è‰²)
  const conditionText = conditionMap[condition] || condition;
  const colorText = colorMap[color || 'Normal'] || color || 'æ™®é€š';

  return `${conditionText}/${colorText}`;
}

function formatDiaperChangeCount(count?: number): string {
  return count ? `${count}å›` : '';
}

function formatMealAmount(amount?: string): string {
  const map: Record<string, string> = {
    'All': 'å®Œé£Ÿ',
    'Most': 'ã»ã¨ã‚“ã©',
    'Half': 'åŠåˆ†',
    'Little': 'å°‘ã—',
    'None': 'ãªã—'
  };
  return amount ? (map[amount] || amount) : '';
}
```

---

## 3. ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«

### 3.1 ãƒ¢ãƒ¼ãƒ€ãƒ«æ§‹é€ 

```tsx
interface EditModalProps {
  isOpen: boolean;
  childName: string;
  date: string;
  recordType: RecordType;
  currentValue: any;
  onSave: (newValue: any) => Promise<void>;
  onClose: () => void;
}

const EditModal: React.FC<EditModalProps> = ({
  isOpen,
  childName,
  date,
  recordType,
  currentValue,
  onSave,
  onClose
}) => {
  const [value, setValue] = useState(currentValue);
  const [isSaving, setIsSaving] = useState(false);

  const handleSave = async () => {
    setIsSaving(true);
    try {
      await onSave(value);
      onClose();
    } catch (error) {
      alert('ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ');
    } finally {
      setIsSaving(false);
    }
  };

  return (
    <Modal isOpen={isOpen} onClose={onClose}>
      <div className="modal-header">
        <h2>ç·¨é›†: {childName}ã•ã‚“ - {formatDate(date)}</h2>
        <button className="close-button" onClick={onClose}>Ã—</button>
      </div>

      <div className="modal-body">
        {renderFormByRecordType(recordType, value, setValue)}
      </div>

      <div className="modal-footer">
        <button
          className="btn-cancel"
          onClick={onClose}
          disabled={isSaving}
        >
          ã‚­ãƒ£ãƒ³ã‚»ãƒ«
        </button>
        <button
          className="btn-save"
          onClick={handleSave}
          disabled={isSaving}
        >
          {isSaving ? 'ä¿å­˜ä¸­...' : 'ä¿å­˜'}
        </button>
      </div>
    </Modal>
  );
};
```

### 3.2 è¨˜éŒ²ã‚¿ã‚¤ãƒ—åˆ¥ãƒ•ã‚©ãƒ¼ãƒ 

#### 3.2.1 ä½“æ¸©ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ 

**ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ç‰ˆ**: æ•°å€¤ã‚’ç›´æ¥å…¥åŠ›ã™ã‚‹æ–¹å¼ï¼ˆãƒ¢ãƒã‚¤ãƒ«ã®é›»å“UIã¨ã¯ç•°ãªã‚‹ï¼‰

```tsx
const TemperatureForm: React.FC<FormProps> = ({ value, onChange }) => {
  const [temp, setTemp] = useState(value?.temperature || '');
  const [time, setTime] = useState(value?.time || '');

  const handleTempChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const val = e.target.value;
    // æ•°å€¤ã¨å°æ•°ç‚¹ã®ã¿è¨±å¯ã€35.0ï½40.0ã®ç¯„å›²ã‚’æƒ³å®š
    if (/^\d*\.?\d*$/.test(val)) {
      setTemp(val);
      onChange({ temperature: parseFloat(val) || 0, time });
    }
  };

  const handleTimeChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setTime(e.target.value);
    onChange({ temperature: parseFloat(temp) || 0, time: e.target.value });
  };

  return (
    <div className="temperature-form">
      <div className="form-group">
        <label htmlFor="temp-input">ä½“æ¸© (â„ƒ)</label>
        <input
          id="temp-input"
          type="number"
          step="0.1"
          min="35.0"
          max="40.0"
          value={temp}
          onChange={handleTempChange}
          placeholder="ä¾‹: 36.5"
          className="temp-input"
        />
        <span className="input-hint">35.0ï½40.0ã®ç¯„å›²ã§å…¥åŠ›ã—ã¦ãã ã•ã„</span>
      </div>

      <div className="form-group">
        <label htmlFor="time-input">æ¸¬å®šæ™‚åˆ»</label>
        <input
          id="time-input"
          type="time"
          value={time}
          onChange={handleTimeChange}
        />
      </div>
    </div>
  );
};
```

**ã‚¹ã‚¿ã‚¤ãƒ«**:
```css
.temp-input {
  width: 100%;
  padding: 10px 12px;
  font-size: 16px;
  border: 1px solid #D1D5DB;
  border-radius: 6px;
}

.input-hint {
  display: block;
  margin-top: 4px;
  font-size: 12px;
  color: #6B7280;
}
```

#### 3.2.2 é£Ÿäº‹ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ 

```tsx
const MealForm: React.FC<FormProps> = ({ value, onChange }) => {
  const options = [
    { value: 'All', label: 'å®Œé£Ÿ' },
    { value: 'Most', label: 'ã»ã¨ã‚“ã©' },
    { value: 'Half', label: 'åŠåˆ†' },
    { value: 'Little', label: 'å°‘ã—' },
    { value: 'None', label: 'ãªã—' }
  ];

  return (
    <div className="meal-form">
      <div className="form-group">
        <label>æ‘‚å–é‡</label>
        <div className="radio-group">
          {options.map(opt => (
            <label key={opt.value} className="radio-label">
              <input
                type="radio"
                name="meal-amount"
                value={opt.value}
                checked={value === opt.value}
                onChange={(e) => onChange(e.target.value)}
              />
              <span>{opt.label}</span>
            </label>
          ))}
        </div>
      </div>
    </div>
  );
};
```

#### 3.2.3 æ˜¼å¯ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ 

**ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ç‰ˆ**: æ™‚ã¨åˆ†ã‚’åˆ†ã‘ãŸãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³æ–¹å¼ã€åˆ†ã¯10åˆ†åˆ»ã¿ï¼ˆ0, 10, 20, 30, 40, 50ï¼‰

```tsx
const SleepForm: React.FC<FormProps> = ({ value, onChange }) => {
  // åˆæœŸå€¤ã®è§£æ: "12:30" â†’ hour: 12, minute: 30
  const parseTime = (timeStr: string) => {
    if (!timeStr) return { hour: '', minute: '' };
    const [h, m] = timeStr.split(':');
    return { hour: h, minute: m };
  };

  const [startHour, setStartHour] = useState(parseTime(value?.start || '').hour);
  const [startMinute, setStartMinute] = useState(parseTime(value?.start || '').minute);
  const [endHour, setEndHour] = useState(parseTime(value?.end || '').hour);
  const [endMinute, setEndMinute] = useState(parseTime(value?.end || '').minute);

  const hours = Array.from({ length: 24 }, (_, i) => i.toString().padStart(2, '0'));
  const minutes = ['00', '10', '20', '30', '40', '50'];

  const formatTime = (hour: string, minute: string) => {
    if (!hour || !minute) return '';
    return `${hour}:${minute}`;
  };

  const duration = useMemo(() => {
    const startTime = formatTime(startHour, startMinute);
    const endTime = formatTime(endHour, endMinute);

    if (!startTime || !endTime) return 0;

    const start = new Date(`2000-01-01 ${startTime}`);
    const end = new Date(`2000-01-01 ${endTime}`);
    return Math.round((end.getTime() - start.getTime()) / 60000);
  }, [startHour, startMinute, endHour, endMinute]);

  const handleChange = (type: 'start' | 'end', part: 'hour' | 'minute', value: string) => {
    if (type === 'start') {
      if (part === 'hour') setStartHour(value);
      else setStartMinute(value);
    } else {
      if (part === 'hour') setEndHour(value);
      else setEndMinute(value);
    }

    // è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«é€šçŸ¥
    const newStart = type === 'start'
      ? formatTime(part === 'hour' ? value : startHour, part === 'minute' ? value : startMinute)
      : formatTime(startHour, startMinute);
    const newEnd = type === 'end'
      ? formatTime(part === 'hour' ? value : endHour, part === 'minute' ? value : endMinute)
      : formatTime(endHour, endMinute);

    onChange({ start: newStart, end: newEnd, duration });
  };

  return (
    <div className="sleep-form">
      <div className="form-group">
        <label>é–‹å§‹æ™‚åˆ»</label>
        <div className="time-picker-group">
          <select
            value={startHour}
            onChange={(e) => handleChange('start', 'hour', e.target.value)}
            className="time-select"
          >
            <option value="">--</option>
            {hours.map(h => (
              <option key={h} value={h}>{h}</option>
            ))}
          </select>
          <span className="time-separator">:</span>
          <select
            value={startMinute}
            onChange={(e) => handleChange('start', 'minute', e.target.value)}
            className="time-select"
          >
            <option value="">--</option>
            {minutes.map(m => (
              <option key={m} value={m}>{m}</option>
            ))}
          </select>
        </div>
      </div>

      <div className="form-group">
        <label>çµ‚äº†æ™‚åˆ»</label>
        <div className="time-picker-group">
          <select
            value={endHour}
            onChange={(e) => handleChange('end', 'hour', e.target.value)}
            className="time-select"
          >
            <option value="">--</option>
            {hours.map(h => (
              <option key={h} value={h}>{h}</option>
            ))}
          </select>
          <span className="time-separator">:</span>
          <select
            value={endMinute}
            onChange={(e) => handleChange('end', 'minute', e.target.value)}
            className="time-select"
          >
            <option value="">--</option>
            {minutes.map(m => (
              <option key={m} value={m}>{m}</option>
            ))}
          </select>
        </div>
      </div>

      <div className="duration-display">
        ç¡çœ æ™‚é–“: <strong>{duration > 0 ? `${duration}åˆ†` : '--'}</strong>
      </div>
    </div>
  );
};
```

**ã‚¹ã‚¿ã‚¤ãƒ«**:
```css
.time-picker-group {
  display: flex;
  align-items: center;
  gap: 8px;
}

.time-select {
  width: 80px;
  padding: 8px 12px;
  font-size: 14px;
  border: 1px solid #D1D5DB;
  border-radius: 6px;
  background-color: white;
}

.time-separator {
  font-size: 18px;
  font-weight: 600;
  color: #374151;
}

.duration-display {
  margin-top: 16px;
  padding: 12px;
  background-color: #F3F4F6;
  border-radius: 6px;
  font-size: 14px;
  text-align: center;
}

.duration-display strong {
  color: #3B82F6;
  font-size: 16px;
}
```

#### 3.2.4 æ’æ³„ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ 

```tsx
const ToiletingForm: React.FC<FormProps> = ({ value, onChange, subType }) => {
  if (subType === 'urine') {
    return (
      <div className="urine-form">
        <div className="form-group">
          <label>ãŠã—ã£ã“ã®é‡</label>
          <div className="radio-group">
            <label className="radio-label">
              <input type="radio" value="Little" />
              <span>å°‘ãªã‚</span>
            </label>
            <label className="radio-label">
              <input type="radio" value="Normal" />
              <span>æ™®é€š</span>
            </label>
            <label className="radio-label">
              <input type="radio" value="Lot" />
              <span>å¤šã‚</span>
            </label>
          </div>
        </div>
      </div>
    );
  }

  if (subType === 'bowel') {
    return (
      <div className="bowel-form">
        <div className="form-group">
          <label>ä¾¿ã®çŠ¶æ…‹</label>
          <select>
            <option value="Normal">æ™®é€š</option>
            <option value="Soft">è»Ÿä¾¿</option>
            <option value="Diarrhea">ä¸‹ç—¢</option>
            <option value="Hard">ç¡¬ã„</option>
          </select>
        </div>

        <div className="form-group">
          <label>ä¾¿ã®è‰²</label>
          <select>
            <option value="Normal">é€šå¸¸</option>
            <option value="Green">ç·‘è‰²</option>
            <option value="White">ç™½è‰²</option>
            <option value="Black">é»’è‰²</option>
            <option value="Bloody">è¡€ä¾¿</option>
          </select>
        </div>
      </div>
    );
  }

  if (subType === 'diaper') {
    return (
      <div className="diaper-form">
        <div className="form-group">
          <label htmlFor="diaper-count">ã‚ªãƒ ãƒ„äº¤æ›å›æ•°</label>
          <select
            id="diaper-count"
            value={value || 0}
            onChange={(e) => onChange(Number(e.target.value))}
            className="diaper-select"
          >
            {Array.from({ length: 11 }, (_, i) => i).map(count => (
              <option key={count} value={count}>
                {count}å›
              </option>
            ))}
          </select>
        </div>
      </div>
    );
  }
};
```

### 3.3 ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¹ã‚¿ã‚¤ãƒ«

```css
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.modal-container {
  background-color: white;
  border-radius: 12px;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
  max-width: 600px;
  width: 90%;
  max-height: 80vh;
  overflow-y: auto;
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 24px;
  border-bottom: 1px solid #E5E7EB;
}

.modal-header h2 {
  font-size: 18px;
  font-weight: 700;
  color: #1F2937;
  margin: 0;
}

.close-button {
  background: none;
  border: none;
  font-size: 24px;
  color: #6B7280;
  cursor: pointer;
  padding: 0;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  transition: background-color 0.2s;
}

.close-button:hover {
  background-color: #F3F4F6;
}

.modal-body {
  padding: 24px;
}

.form-group {
  margin-bottom: 20px;
}

.form-group label {
  display: block;
  font-size: 14px;
  font-weight: 600;
  color: #374151;
  margin-bottom: 8px;
}

.form-group input[type="time"],
.form-group input[type="number"],
.form-group select {
  width: 100%;
  padding: 10px 12px;
  font-size: 14px;
  border: 1px solid #D1D5DB;
  border-radius: 6px;
}

.radio-group {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.radio-label {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  padding: 10px;
  border-radius: 6px;
  transition: background-color 0.2s;
}

.radio-label:hover {
  background-color: #F3F4F6;
}

.radio-label input[type="radio"] {
  width: 18px;
  height: 18px;
  cursor: pointer;
}

.modal-footer {
  display: flex;
  justify-content: flex-end;
  gap: 12px;
  padding: 16px 24px;
  border-top: 1px solid #E5E7EB;
}

.btn-cancel,
.btn-save {
  padding: 10px 24px;
  font-size: 14px;
  font-weight: 600;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s;
}

.btn-cancel {
  background-color: white;
  color: #6B7280;
  border: 1px solid #D1D5DB;
}

.btn-cancel:hover {
  background-color: #F9FAFB;
}

.btn-save {
  background-color: #3B82F6;
  color: white;
  border: none;
}

.btn-save:hover {
  background-color: #2563EB;
}

.btn-save:disabled {
  background-color: #9CA3AF;
  cursor: not-allowed;
}
```

---

## 4. ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ

### 4.1 ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆ

```css
/* ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ— (1920pxä»¥ä¸Š) */
@media screen and (min-width: 1920px) {
  .col-date {
    width: 160px;
  }
}

/* ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ (1280px - 1600px) */
@media screen and (max-width: 1600px) {
  .infant-weekly-matrix {
    font-size: 12px;
  }

  .col-date {
    width: 120px;
    min-width: 120px;
  }

  .col-item {
    width: 100px;
    min-width: 100px;
  }
}

/* å°å‹ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ— (1024px - 1280px) */
@media screen and (max-width: 1280px) {
  .infant-weekly-matrix {
    font-size: 11px;
  }

  .col-date {
    width: 100px;
    min-width: 100px;
  }
}
```

---

## 5. ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£

### 5.1 ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ

- **Tab**: æ¬¡ã®ã‚»ãƒ«ã«ç§»å‹•
- **Shift + Tab**: å‰ã®ã‚»ãƒ«ã«ç§»å‹•
- **Enter**: ç·¨é›†å¯èƒ½ã‚»ãƒ«ã§ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã
- **Escape**: ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹

### 5.2 ARIAå±æ€§

```tsx
<td
  className="data-cell staff-input editable"
  role="button"
  tabIndex={0}
  aria-label={`${childName}ã•ã‚“ã®${formatDate(date)}ã®${recordLabel}ã‚’ç·¨é›†`}
  onClick={() => handleCellClick()}
  onKeyPress={(e) => e.key === 'Enter' && handleCellClick()}
>
  {displayValue}
</td>
```

### 5.3 ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œ

```tsx
<table
  className="infant-weekly-matrix"
  role="table"
  aria-label="é€±æ¬¡ç”Ÿæ´»è¨˜éŒ²ãƒãƒˆãƒªãƒƒã‚¯ã‚¹"
>
  <caption className="sr-only">
    {weekStartDate}ã‹ã‚‰{weekEndDate}ã¾ã§ã®é€±æ¬¡ç”Ÿæ´»è¨˜éŒ²
  </caption>
  {/* ... */}
</table>
```

---

## 6. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### 6.1 ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«

åœ’å…æ•°ãŒ20äººã‚’è¶…ãˆã‚‹å ´åˆã€ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’å®Ÿè£…:

```tsx
import { useVirtualizer } from '@tanstack/react-virtual';

const VirtualizedTable: React.FC = ({ children }) => {
  const parentRef = useRef<HTMLDivElement>(null);

  const rowVirtualizer = useVirtualizer({
    count: children.length,
    getScrollElement: () => parentRef.current,
    estimateSize: () => 600, // 1åœ’å…ã‚ãŸã‚Šç´„14è¡Œ Ã— 40px
    overscan: 2
  });

  return (
    <div ref={parentRef} style={{ height: '800px', overflow: 'auto' }}>
      <table>
        {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
        <tbody>
          {rowVirtualizer.getVirtualItems().map(virtualRow => (
            <ChildRecordRows
              key={virtualRow.index}
              child={children[virtualRow.index]}
              style={{
                position: 'absolute',
                top: 0,
                left: 0,
                width: '100%',
                transform: `translateY(${virtualRow.start}px)`
              }}
            />
          ))}
        </tbody>
      </table>
    </div>
  );
};
```

### 6.2 ãƒ¡ãƒ¢åŒ–

```tsx
const ChildRecordRows = React.memo<ChildRecordRowsProps>(({
  child,
  dateRange,
  onCellClick
}) => {
  // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…...
}, (prevProps, nextProps) => {
  return prevProps.child.childId === nextProps.child.childId &&
         JSON.stringify(prevProps.child.dailyRecords) ===
         JSON.stringify(nextProps.child.dailyRecords);
});
```

---

## 7. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°UI

### 7.1 ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹

```tsx
{isLoading && (
  <div className="loading-overlay">
    <div className="spinner"></div>
    <p>ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...</p>
  </div>
)}
```

### 7.2 ã‚¨ãƒ©ãƒ¼è¡¨ç¤º

```tsx
{error && (
  <div className="error-banner">
    <AlertCircle />
    <span>{error.message}</span>
    <button onClick={retry}>å†è©¦è¡Œ</button>
  </div>
)}
```

---

## 8. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆå›³

```
WeeklyRecordsPage
â”œâ”€â”€ Header
â”‚   â”œâ”€â”€ WeekSelector
â”‚   â””â”€â”€ ClassSelector
â”œâ”€â”€ WeeklyMatrixTable
â”‚   â”œâ”€â”€ TableHeader
â”‚   â””â”€â”€ TableBody
â”‚       â””â”€â”€ ChildRecordRows (è¤‡æ•°)
â”‚           â”œâ”€â”€ ChildNameRow
â”‚           â”œâ”€â”€ CategoryRow (å®¶åº­/åˆå‰/åˆå¾Œ/æ’æ³„)
â”‚           â””â”€â”€ DataRow (è¤‡æ•°)
â”‚               â””â”€â”€ DataCell (ã‚¯ãƒªãƒƒã‚¯å¯èƒ½)
â””â”€â”€ EditModal
    â”œâ”€â”€ ModalHeader
    â”œâ”€â”€ ModalBody
    â”‚   â””â”€â”€ RecordForm (è¨˜éŒ²ã‚¿ã‚¤ãƒ—ã«å¿œã˜ã¦å‹•çš„)
    â””â”€â”€ ModalFooter
        â”œâ”€â”€ CancelButton
        â””â”€â”€ SaveButton
```

---

## 9. çŠ¶æ…‹ç®¡ç†

### 9.1 ãƒ­ãƒ¼ã‚«ãƒ«çŠ¶æ…‹

```typescript
const [weekStartDate, setWeekStartDate] = useState<Date>(getWeekStart(new Date()));
const [selectedClassId, setSelectedClassId] = useState<number>(0);
const [weeklyData, setWeeklyData] = useState<WeeklyRecordsData | null>(null);
const [isLoading, setIsLoading] = useState(false);
const [error, setError] = useState<Error | null>(null);
const [editingCell, setEditingCell] = useState<EditingCell | null>(null);
```

### 9.2 ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°

```typescript
const fetchWeeklyData = async () => {
  setIsLoading(true);
  setError(null);

  try {
    const response = await api.get('/desktop/infant-records/weekly', {
      params: {
        nurseryId,
        classId: selectedClassId,
        weekStartDate: formatDate(weekStartDate)
      }
    });

    setWeeklyData(response.data.data);
  } catch (err) {
    setError(err as Error);
  } finally {
    setIsLoading(false);
  }
};

useEffect(() => {
  if (selectedClassId) {
    fetchWeeklyData();
  }
}, [weekStartDate, selectedClassId]);
```

---

## 10. é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [è¦ä»¶å®šç¾©æ›¸](infant-records-requirements.md)
- [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä»•æ§˜æ›¸](infant-records-database-spec.md)
- [APIä»•æ§˜æ›¸](infant-records-api-spec.md)
