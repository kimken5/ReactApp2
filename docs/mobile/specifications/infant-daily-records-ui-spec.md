# 乳児連絡帳機能 画面設計仕様書

## 1. 概要

0～2歳児向け連絡帳機能の画面設計仕様書です。保育士が効率的に記録を入力し、保護者が見やすく確認できるUI/UXを定義します。

---

## 2. UI/UX設計原則

### 2.1 保育士向けUI原則
1. **ワンハンド操作**: 片手（親指）で全操作可能
2. **大きなタッチターゲット**: 最小44pt/48px
3. **テキスト入力最小化**: ボタン・アイコン選択を優先
4. **一括入力対応**: 複数園児に同時記録
5. **デフォルト値アプローチ**: 最頻値から始めて例外調整
6. **オートセーブ**: ローカルストレージで自動保存
7. **フッター固定ボタン**: 保存ボタンを画面下部に常時表示

### 2.2 保護者向けUI原則
1. **タイムライン形式**: 時系列で直感的に理解
2. **視覚的表現**: アイコン・イラストで情報を補完
3. **モバイルファースト**: スマートフォン最適化
4. **シンプル・クリーン**: 情報過多を避ける

---

## 3. 保育士向け画面

### 3.1 日次記録一覧画面

**目的**: クラス全体の記録状態を俯瞰し、未記録園児を把握

#### 3.1.1 レイアウト

```
┌──────────────────────────────────────┐
│ 📅 2025年12月28日 (土)            ▼│ ← カレンダー選択
├──────────────────────────────────────┤
│ 🍒 さくら組 (0歳児)              ▼│ ← クラス選択
├──────────────────────────────────────┤
│ 📊 記録状況: 5/8名完了               │
├──────────────────────────────────────┤
│                                      │
│ ┌──────────────────────────────────┐ │
│ │ 👶 田中 花子          [完了]    │ │ ← 園児カード
│ │ 体温 ✅ 食事 ✅ 睡眠 ✅ 排泄 ✅  │ │
│ └──────────────────────────────────┘ │
│                                      │
│ ┌──────────────────────────────────┐ │
│ │ 👶 佐藤 太郎          [未完了]  │ │ ← 未完了（黄色ハイライト）
│ │ 体温 ✅ 食事 ⚠️ 睡眠 ❌ 排泄 ✅  │ │
│ └──────────────────────────────────┘ │
│                                      │
│ ...（他の園児）                      │
│                                      │
├──────────────────────────────────────┤
│ [一括入力]  [フィルター]           │ ← アクションボタン
└──────────────────────────────────────┘
```

#### 3.1.2 構成要素

**ヘッダー部**
- 日付選択: カレンダーアイコン + ドロップダウン
- クラス選択: クラス名 + アイコン + ドロップダウン
- 記録状況サマリ: 完了人数 / 全体人数

**園児カード**
- 顔写真（丸型、48px）
- 園児名（16px、ボールド）
- 記録状態バッジ:
  - ✅ 完了（緑）
  - ⚠️ 一部未記録（オレンジ）
  - ❌ 未記録（赤）
- 項目別アイコン:
  - 🌡️ 体温
  - 🍚 食事
  - 😴 睡眠
  - 🚽 排泄
  - 😊 機嫌

**フッターボタン**
- `[一括入力]`: 複数園児に同時記録
- `[フィルター]`: 未完了のみ表示など

#### 3.1.3 インタラクション

- カードタップ → 個別記録画面へ遷移
- 長押し → 一括選択モード（チェックボックス表示）
- スワイプ → クイックアクション（体温入力、食事入力など）

---

### 3.2 個別記録画面

**目的**: 1園児の全記録を入力・編集

#### 3.2.1 レイアウト

```
┌──────────────────────────────────────┐
│ ← 田中 花子 (0歳児)          [完了] │ ← ヘッダー
├──────────────────────────────────────┤
│ 🌡️ 体温 | 🍚 食事 | 😴 睡眠 | 🚽 排泄│ ← タブ切り替え
├──────────────────────────────────────┤
│                                      │
│ ┌──────────────────────────────────┐ │
│ │ 🌡️ 体温記録                     │ │ ← 現在のタブ
│ ├──────────────────────────────────┤ │
│ │ 朝の体温（自宅）                │ │
│ │ 測定時刻: [08:30] ⏰            │ │ ← タイムピッカー
│ │ 体温: [36.5] ℃                 │ │ ← 数値入力（キーパッド）
│ │                                  │ │
│ │ 午後の体温（園）                │ │
│ │ 測定時刻: [15:00] ⏰            │ │
│ │ 体温: [36.8] ℃                 │ │
│ │                                  │ │
│ │ 備考: [任意入力]                │ │ ← テキストエリア（折りたたみ）
│ └──────────────────────────────────┘ │
│                                      │
│                                      │
│ （余白100px：フッターボタン分）      │
│                                      │
├──────────────────────────────────────┤
│ [下書き保存]           [記録完了] │ ← フッター固定ボタン
└──────────────────────────────────────┘
   ↑ オレンジ枠          ↑ エメラルドグリーン塗り
```

#### 3.2.2 タブ構成

1. **🌡️ 体温タブ**
   - 朝の体温（自宅）: 時刻 + 体温値
   - 午後の体温（園）: 時刻 + 体温値
   - 異常フラグ自動判定（37.5℃以上で赤色表示）

2. **🍚 食事タブ**
   ```
   ┌──────────────────────────────────┐
   │ 午前おやつ（園）                 │
   │ [完食] [ほとんど] [半分] [少し] [なし] │ ← ボタン選択（排他）
   │                                  │
   │ 昼食（園）                       │
   │ [完食] [ほとんど] [半分] [少し] [なし] │
   │                                  │
   │ 午後おやつ（園）                 │
   │ [完食] [ほとんど] [半分] [少し] [なし] │
   └──────────────────────────────────┘
   ```

3. **😴 睡眠タブ**
   ```
   ┌──────────────────────────────────┐
   │ 昼寝                             │
   │ 開始: [13:00] ⏰                │
   │ 終了: [15:00] ⏰                │
   │ 睡眠時間: 2時間0分（自動計算）  │
   │                                  │
   │ 睡眠の質:                        │
   │ [😴ぐっすり] [😊普通]          │
   │ [😐浅い] [😟何度も起きた]      │
   │                                  │
   │ 備考: [寝つき、起き方など]      │
   │                                  │
   │ [午睡チェック記録を見る]        │ ← 別画面へリンク
   └──────────────────────────────────┘
   ```

4. **🚽 排泄タブ**
   ```
   ┌──────────────────────────────────┐
   │ おしっこ: 3回                    │
   │ ├ 10:00                          │
   │ ├ 12:30                          │
   │ └ 15:00  [+追加]                │ ← タイムピッカー
   │                                  │
   │ うんち: 1回                      │
   │ ├ 14:30                          │
   │   状態: [普通] [軟便] [下痢] [硬い] │
   │   色: [通常] [緑] [白] [黒] [血便] │
   │   備考: [任意]                   │
   │ [+追加]                          │
   └──────────────────────────────────┘
   ```

5. **😊 機嫌タブ**
   ```
   ┌──────────────────────────────────┐
   │ 朝の機嫌（登園時）               │
   │ [😊良い] [🙂普通] [😟悪い] [😭泣いた] │
   │ 備考: [保護者申し送り]           │
   │                                  │
   │ 午後の機嫌（降園前）             │
   │ [😊良い] [🙂普通] [😟悪い] [😭泣いた] │
   │ 備考: [活動中の様子]             │
   └──────────────────────────────────┘
   ```

6. **📝 その他タブ**
   ```
   ┌──────────────────────────────────┐
   │ 午前の活動                       │
   │ [お散歩、外遊びなど]             │
   │                                  │
   │ 午後の活動                       │
   │ [工作、読み聞かせなど]           │
   │                                  │
   │ 保護者への連絡事項               │
   │ [体調変化、怪我、持ち物など]     │
   │                                  │
   │ 特記事項                         │
   │ [成長の様子、気づきなど]         │
   └──────────────────────────────────┘
   ```

#### 3.2.3 フッターボタン

- **下書き保存**: オレンジ色のアウトライン、左側配置
  - 記録途中でも保存可能
  - ローカルストレージにも自動保存
  - 保護者には非公開

- **記録完了**: エメラルドグリーンの塗りつぶし、右側配置
  - 全項目入力済みでアクティブ化
  - タップで保護者に公開（確認ダイアログ表示）

#### 3.2.4 インタラクション

- タブ切り替え: スワイプ or タップ
- 時刻入力: タイムピッカー（5分刻み推奨）
- ボタン選択: 排他的選択（1つだけ選択可能）
- 数値入力: 数値キーパッド（小数点対応）
- 備考: 折りたたみ可能（デフォルトで閉じておく）

---

### 3.3 一括入力画面

**目的**: 複数園児に同じ記録を一括適用（効率化）

#### 3.3.1 レイアウト

```
┌──────────────────────────────────────┐
│ ← 一括入力                           │
├──────────────────────────────────────┤
│ 園児選択 (3/8名選択中)               │
├──────────────────────────────────────┤
│ ☑️ 田中 花子                         │
│ ☑️ 佐藤 太郎                         │
│ ☑️ 鈴木 次郎                         │
│ ☐ 山田 三郎                          │
│ ... (他の園児)                       │
├──────────────────────────────────────┤
│ 記録項目:                            │
│ [🌡️ 体温] [🍚 食事] [😴 睡眠]     │ ← 項目選択
├──────────────────────────────────────┤
│ 🍚 昼食記録                         │
│ [完食] [ほとんど] [半分] [少し] [なし] │
│                                      │
│ ※選択した3名全員に適用されます      │
├──────────────────────────────────────┤
│ [キャンセル]           [一括適用] │ ← フッター固定
└──────────────────────────────────────┘
```

#### 3.3.2 ユースケース

**例1: 昼食の一括入力**
1. 園児を選択（チェックボックス）
2. 「食事」項目を選択
3. 「昼食 - 完食」を入力
4. 「一括適用」ボタンタップ
5. 選択した園児全員に記録が保存される
6. 例外の園児（食べが悪かった子）は個別画面で修正

**例2: デフォルト値アプローチ**
1. 朝の段階で「全員体温正常」を一括入力
2. 午後に体温が高かった園児だけ個別修正

---

### 3.4 午睡チェック画面

**目的**: SIDS予防のための5～10分間隔チェック記録

#### 3.4.1 レイアウト

```
┌──────────────────────────────────────┐
│ 😴 午睡チェック  [⏰ 5分タイマー]   │ ← タイマー機能
├──────────────────────────────────────┤
│ 昼寝中の園児: 8名                    │
├──────────────────────────────────────┤
│ ┌──────────────────────────────────┐ │
│ │ 👶 田中 花子  13:00～15:00      │ │
│ │ 最終チェック: 14:35 (5分前)     │ │
│ │ [呼吸OK] [仰向け] [異常なし]   │ │ ← クイック入力ボタン
│ └──────────────────────────────────┘ │
│                                      │
│ ┌──────────────────────────────────┐ │
│ │ 👶 佐藤 太郎  13:00～15:00      │ │
│ │ 最終チェック: 14:30 (10分前)⚠️  │ │ ← チェック漏れ警告
│ │ [呼吸OK] [横向き] [異常なし]   │ │
│ └──────────────────────────────────┘ │
│                                      │
│ ...（他の園児）                      │
│                                      │
├──────────────────────────────────────┤
│ [全員チェック完了]                  │ ← 一括記録ボタン
└──────────────────────────────────────┘
```

#### 3.4.2 タイマー機能

- 5分 or 10分のカウントダウンタイマー
- アラーム（バイブ + 音）
- タイマーリセット機能

#### 3.4.3 チェック項目

- **呼吸**: OK / 異常（ボタン1タップ）
- **体位**: 仰向け / 横向き / うつ伏せ（ボタン選択）
- **異常**: なし / あり（ありの場合は詳細入力）

#### 3.4.4 インタラクション

- カードタップ → 詳細チェック画面（過去履歴確認）
- `[全員チェック完了]` → 全員に現在時刻でチェック記録を一括保存

---

## 4. 保護者向け画面

### 4.1 タイムライン表示

**目的**: 1日の記録を時系列で直感的に確認

#### 4.1.1 レイアウト

```
┌──────────────────────────────────────┐
│ 📅 2025年12月28日 (土)            ▼│ ← 日付選択
├──────────────────────────────────────┤
│ 田中 花子ちゃんの記録                │
├──────────────────────────────────────┤
│                                      │
│ 🌅 朝（自宅）                        │
│ ┌──────────────────────────────────┐ │
│ │ 🌡️ 体温: 36.5℃ (08:30)        │ │
│ │ 🍪 午前おやつ: 完食             │ │
│ │ 😊 機嫌: 良い                   │ │
│ │ 「元気に登園しました」           │ │
│ └──────────────────────────────────┘ │
│                                      │
│ ☀️ 午前（園）                        │
│ ┌──────────────────────────────────┐ │
│ │ 🚽 おしっこ: 10:00              │ │
│ │ 🎨 活動: お散歩、外遊び         │ │
│ └──────────────────────────────────┘ │
│                                      │
│ 🍴 昼食（園）                        │
│ ┌──────────────────────────────────┐ │
│ │ 🍚 摂取量: ほとんど              │ │
│ │ 「にんじんが少し苦手だったよう  │ │
│ │   ですが、頑張って食べました」  │ │
│ └──────────────────────────────────┘ │
│                                      │
│ 😴 お昼寝（園）                      │
│ ┌──────────────────────────────────┐ │
│ │ ⏰ 13:00 ～ 15:00 (2時間)      │ │
│ │ 😴 睡眠の質: ぐっすり           │ │
│ │ 「すぐに寝つき、ぐっすり眠り   │ │
│ │   ました。起きた時はご機嫌♪」  │ │
│ └──────────────────────────────────┘ │
│                                      │
│ 🌇 午後（園）                        │
│ ┌──────────────────────────────────┐ │
│ │ 🚽 おしっこ: 12:30, 15:00       │ │
│ │ 💩 うんち: 14:30 (普通)         │ │
│ │ 🍪 午後おやつ: 完食             │ │
│ │ 🌡️ 体温: 36.8℃ (15:00)        │ │
│ │ 😊 機嫌: 普通                   │ │
│ │ 「降園時は少し眠そうでした」    │ │
│ └──────────────────────────────────┘ │
│                                      │
│ 💬 保護者への連絡事項                │
│ ┌──────────────────────────────────┐ │
│ │ 今日はお友達と楽しく遊んでいま  │ │
│ │ した。体調も良好です。           │ │
│ └──────────────────────────────────┘ │
└──────────────────────────────────────┘
```

#### 4.1.2 デザイン要素

- **アイコン**: 各項目に対応する絵文字・イラスト
- **カード形式**: 時間帯ごとにカードで区切り
- **色分け**: 朝（オレンジ）、昼（黄色）、午後（青）
- **コメント**: 保育士のメッセージを吹き出しで表示

#### 4.1.3 インタラクション

- 日付選択: カレンダーで過去の記録を閲覧
- カードタップ: 詳細表示（写真添付がある場合など）
- スクロール: 上下スワイプで時系列を確認

---

### 4.2 項目別グラフ表示

**目的**: 週間・月間の推移を視覚的に確認

#### 4.2.1 レイアウト

```
┌──────────────────────────────────────┐
│ 📊 記録の推移                        │
├──────────────────────────────────────┤
│ [週間] [月間]                       │ ← 期間選択
│ [体温] [食事] [睡眠] [排泄]         │ ← 項目選択
├──────────────────────────────────────┤
│ 🌡️ 体温の推移（週間）              │
│                                      │
│  37.5℃ ┼─────────────────          │
│  37.0℃ ┼─────────────────          │
│  36.5℃ ┼●─●─●─●─●─●─●  ← 折れ線グラフ
│  36.0℃ ┼─────────────────          │
│         月 火 水 木 金 土 日          │
│                                      │
│ 🍚 食事摂取量の推移（週間）         │
│                                      │
│  完食   ┼███ ███ ███ ███           │
│  半分   ┼    ███                    │ ← 棒グラフ
│  少し   ┼                            │
│         月  火  水  木  金  土  日   │
│                                      │
│ 😴 睡眠時間の推移（週間）           │
│                                      │
│  3時間  ┼─────────────────          │
│  2時間  ┼●─●─●─●─●─●─●  ← 折れ線グラフ
│  1時間  ┼─────────────────          │
│         月 火 水 木 金 土 日          │
└──────────────────────────────────────┘
```

#### 4.2.2 グラフ種類

- **体温**: 折れ線グラフ（37.5℃のラインを強調表示）
- **食事**: 積み上げ棒グラフ（主食・副食・汁物）
- **睡眠**: 折れ線グラフ（睡眠時間）
- **排泄**: 棒グラフ（おしっこ・うんちの回数）

---

### 4.3 通知機能

**目的**: 記録完了や異常時に保護者へ即時通知

#### 4.3.1 通知タイプ

1. **記録完了通知**
   - タイトル: 「今日の記録が完成しました」
   - 本文: 「田中 花子ちゃんの12月28日の記録を確認できます」
   - タップ → タイムライン画面へ遷移

2. **体温異常通知**
   - タイトル: 「⚠️ 体温が高めです」
   - 本文: 「午後の体温: 37.8℃。様子を見ています。」
   - タップ → 当日のタイムライン画面へ遷移

3. **体調変化通知**
   - タイトル: 「💩 下痢がありました」
   - 本文: 「14:30に下痢がありました。水分補給をしています。」

#### 4.3.2 通知設定

- 保護者はアプリ内で通知のON/OFF設定可能
- プッシュ通知（FCM）を使用

---

## 5. 共通UI要素

### 5.1 カラーパレット

| 用途 | カラー | Tailwind CSS |
|------|--------|--------------|
| プライマリ | エメラルドグリーン | `bg-emerald-500` |
| セカンダリ | オレンジ | `bg-orange-500` |
| 成功 | 緑 | `bg-green-500` |
| 警告 | 黄色 | `bg-yellow-500` |
| エラー | 赤 | `bg-red-500` |
| 背景 | グレー | `bg-gray-50` |
| テキスト | ダークグレー | `text-gray-900` |

### 5.2 タイポグラフィ

| 要素 | フォントサイズ | 太さ |
|------|---------------|------|
| H1（画面タイトル） | 24px | Bold |
| H2（セクションタイトル） | 20px | Bold |
| H3（項目名） | 16px | SemiBold |
| Body（本文） | 14px | Regular |
| Caption（補足） | 12px | Regular |

### 5.3 スペーシング

- 最小タッチターゲット: 48px × 48px
- カード間マージン: 16px
- セクション間マージン: 24px
- 画面余白（padding）: 16px

### 5.4 アイコン

- **体温**: 🌡️ Thermometer
- **食事**: 🍚 Rice Bowl, 🍴 Fork & Knife
- **睡眠**: 😴 Sleeping Face, 🛏️ Bed
- **排泄**: 🚽 Toilet, 💩 Poo
- **機嫌**: 😊😐😟😭 Face Emojis
- **活動**: 🎨🏃‍♂️📚 Activity Icons

---

## 6. レスポンシブデザイン

### 6.1 ブレークポイント

| デバイス | 幅 | レイアウト |
|---------|-----|-----------|
| スマートフォン | < 640px | 1カラム |
| タブレット | 640px～1024px | 1～2カラム |
| デスクトップ | > 1024px | 2～3カラム |

### 6.2 スマートフォン最適化

- **フッターボタン**: 画面下部固定（親指操作）
- **タブ切り替え**: スワイプジェスチャー対応
- **テキスト入力**: 最小化（ボタン選択優先）
- **画像**: 遅延読み込み（Lazy Loading）

### 6.3 タブレット最適化

- **2カラムレイアウト**: 一覧 + 詳細（分割表示）
- **大きなタッチターゲット**: 48px以上維持

---

## 7. アクセシビリティ

### 7.1 WCAG 2.1 AA準拠

- **色コントラスト比**: 4.5:1以上
- **フォーカスインジケーター**: キーボード操作時の視覚的フィードバック
- **音声読み上げ対応**: ARIA属性でスクリーンリーダー対応

### 7.2 実装例

```tsx
// ボタンのARIA属性
<button
  aria-label="朝の体温を記録"
  aria-pressed={isMorningTempRecorded}
  className="min-h-[48px] bg-emerald-500 text-white"
>
  記録する
</button>

// タブのARIA属性
<div role="tablist">
  <button role="tab" aria-selected={activeTab === 'temperature'}>
    🌡️ 体温
  </button>
</div>
```

---

## 8. パフォーマンス最適化

### 8.1 遅延読み込み

- **画像**: React `lazy()` + Intersection Observer
- **コンポーネント**: Code Splitting（React.lazy）
- **データ**: 無限スクロール（Virtual Scrolling）

### 8.2 キャッシング

- **ローカルストレージ**: 下書き保存
- **Service Worker**: オフライン対応
- **React Query**: サーバーデータキャッシュ

---

## 9. セキュリティ

### 9.1 入力検証

- **体温**: 34.0～42.0℃の範囲チェック
- **時刻**: 未来の時刻を入力不可
- **テキスト**: XSS対策（サニタイゼーション）

### 9.2 権限制御

- **保育士**: 担当クラスの園児のみ記録可能
- **保護者**: 自分の子どものみ閲覧可能

---

## 10. 実装技術スタック

### 10.1 フロントエンド

- **フレームワーク**: React 19.1 + TypeScript
- **スタイリング**: Tailwind CSS
- **状態管理**: React Context API + React Query
- **フォーム**: React Hook Form
- **日付操作**: dayjs
- **グラフ**: Recharts or Chart.js

### 10.2 バックエンド連携

- **API通信**: Axios
- **認証**: JWT（既存システム連携）
- **リアルタイム通知**: Firebase Cloud Messaging (FCM)

---

## 11. 実装優先順位

### フェーズ1（MVP）
1. 個別記録画面（体温・食事・睡眠・排泄・機嫌）
2. 日次記録一覧画面
3. 保護者向けタイムライン表示
4. 基本的な通知機能

### フェーズ2
1. 一括入力機能
2. 午睡チェック画面
3. 項目別グラフ表示
4. オートセーブ機能

### フェーズ3
1. 写真添付機能
2. 保護者フィードバック機能
3. AI異常検知
4. オフライン対応

---

## 12. ワイヤーフレーム補足

### 12.1 保育士向けナビゲーション

```
┌──────────────────────────────────────┐
│ 🏠 ホーム | 📋 記録 | 📸 写真 | ⚙️  │ ← グローバルナビ
└──────────────────────────────────────┘
```

- `🏠 ホーム`: ダッシュボード
- `📋 記録`: 日次記録一覧（本機能）
- `📸 写真`: 写真管理
- `⚙️ 設定`: プロフィール・通知設定

### 12.2 保護者向けナビゲーション

```
┌──────────────────────────────────────┐
│ 📅 記録 | 📸 写真 | 📢 お知らせ | 👤 │ ← グローバルナビ
└──────────────────────────────────────┘
```

- `📅 記録`: タイムライン（本機能）
- `📸 写真`: 園からの写真
- `📢 お知らせ`: お知らせ一覧
- `👤 マイページ`: プロフィール・設定

---

## 13. まとめ

本画面設計仕様書では、以下のポイントを重視しています:

1. **保育士の効率化**: ワンハンド操作、一括入力、デフォルト値アプローチ
2. **保護者の理解しやすさ**: タイムライン形式、視覚的アイコン、グラフ表示
3. **モバイル最適化**: 大きなタッチターゲット、フッター固定ボタン、スワイプ操作
4. **SIDS予防**: 午睡チェック機能とタイマー
5. **柔軟性**: タブ切り替えで全項目を1画面に集約

既存システムのデザインパターン（ReportCreate, AnnouncementCreateのフッター固定など）を継承しつつ、乳児向け連絡帳に特化した使いやすいUIを実現します。
